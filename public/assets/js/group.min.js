/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!**************************************!*\
  !*** ./resources/assets/js/group.js ***!
  \**************************************/
var groupUrl = $("#url").val();
var totalPage = 0;
var customLimit = 5;
var lastUserId;
$(document).ready(function () {
  getGroups();
});
$("#group_form").submit(function (event) {
  $("#group_add").prop('disabled', true);
  event.preventDefault();
  var formData = $(this).serialize();
  ajaxRequest('POST', "".concat(groupUrl, "/user/group/add"), formData, 'application/x-www-form-urlencoded', true, function (result) {
    if (result.flag === 1) {
      $('#group_form')[0].reset();
      getGroups();
      showToast(result.msg, 'success');
      $('#addGroupModal').modal('hide');
      $("#group_add").prop('disabled', false);
    } else {
      $("#group_add").prop('disabled', false);
      showToast(result.msg, 'danger');
    }
  });
});
$(document).on("click", ".groupUpdateBtn", function () {
  lastUserId = $(this).data("id");
  var group_name = $(this).data("name");
  $("#update_name").val(group_name);
});
$("#group_update_btn").click(function () {
  $("#group_update_btn").prop('disabled', true);
  var update_name = $("#update_name").val();
  var formData = {
    name: update_name
  };
  ajaxRequest('PATCH', "".concat(groupUrl, "/user/group/update/").concat(lastUserId), formData, 'application/x-www-form-urlencoded', true, function (result) {
    if (result.flag === 1) {
      getGroups();
      showToast(result.msg, 'success');
      $('#updateGroupModal').modal('hide');
      $("#group_update_btn").prop('disabled', false);
    } else {
      showToast(result.msg, 'danger');
      $("#group_update_btn").prop('disabled', false);
    }
  });
});
$(document).on("click", ".groupDeleteBtn", function () {
  lastUserId = $(this).data("id");
});
$("#delete_group_btn").click(function () {
  if (lastUserId) {
    ajaxRequest('DELETE', "".concat(groupUrl, "/user/group/delete/").concat(lastUserId), null, 'application/x-www-form-urlencoded', true, function (result) {
      if (result.flag === 1) {
        showToast(result.msg, 'success');
        getGroups();
      }
    });
    lastUserId = null;
  }
});
$('body').on('click', '[id^="page_"]', function () {
  var page = parseInt($(this).data('page'));
  search_name = $('#search_name').val().trim();
  getGroups(page, customLimit, search_name);
});
$('body').on('click', '#prev_page', function () {
  var currentPage = parseInt($('.pagination-lg li.active a').text());
  var prevpage = currentPage - 1;
  search_name = $('#search_name').val().trim();
  if (currentPage > 1) {
    getGroups(prevpage, customLimit, search_name);
  }
});
$('body').on('click', '#next_page', function () {
  var currentPage = parseInt($('.pagination-lg li.active a').text());
  var nextPage = currentPage + 1;
  search_name = $('#search_name').val().trim();
  if (nextPage <= totalPage) {
    getGroups(nextPage, customLimit, search_name);
  }
});
$('#group_limit_form').on('submit', function (event) {
  event.preventDefault();
  customLimit = $("#group_limit").val() || 5;
  search_name = $('#search_name').val().trim();
  getGroups(1, customLimit, search_name);
});
$('#search_form').on('submit', function (event) {
  event.preventDefault();
  var search_name = $('#search_name').val().trim();
  if (search_name !== '') {
    getGroups(1, customLimit, search_name);
  } else {
    $(this)[0].reset();
    showToast('Please Enter Search Field', 'danger');
  }
});
$(document).on('click', "#reset_group_btn", function () {
  $("#search_form")[0].reset();
  getGroups(1, customLimit, '');
});
var getGroups = function getGroups() {
  var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
  var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : customLimit;
  var search_name = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
  var FormData = {
    page: page,
    limit: limit,
    search_name: search_name
  };
  ajaxRequest('POST', "".concat(groupUrl, "/user/group/list"), FormData, 'application/x-www-form-urlencoded', true, function (result) {
    if (result.flag === 1) {
      var response = result.data.views;
      $('#group_list').html(response);
      totalPage = result.data.totalPage;
    } else {
      console.log("error--->", result);
    }
  });
};
/******/ })()
;